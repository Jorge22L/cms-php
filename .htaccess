RewriteEngine on
RewriteBase /

# Redirigir todas las solicitudes a carpeta public/
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ public/$1 [L]

# Proteger archivos sensibles
<Files ~ "^(composer\.json|composer\.lock|\.env|\.htaccess|web\.config|.php)$">
    Deny from all
</Files>

# Prevenir acceso directo a archivo PHP en algunos directorios
<FilesMatch "\.php$">
    <IfModule !mod_authz_core.c>
        Order deny,allow
        Deny from all
    </IfModule>
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
</FilesMatch>

<Files "index.php">
    <IfModule !mod_authz_core.c>
        Order allow,deny
        Allow from all
    </IfModule>
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
</Files>
